<div class="p-6 space-y-6">

  <!-- Balance -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    <div class="bg-white shadow rounded-2xl p-6 text-center">
      <p class="text-gray-500">Total que debo</p>
      <p class="text-2xl font-bold text-red-500">{{ totalDebo | currency }}</p>
    </div>
    <div class="bg-white shadow rounded-2xl p-6 text-center">
      <p class="text-gray-500">Total que me deben</p>
      <p class="text-2xl font-bold text-green-500">{{ totalMeDeben | currency }}</p>
    </div>
  </div>

  <!-- Tabs -->
  <div class="flex space-x-4 border-b">
    <button 
      (click)="switchTab('debo')" 
      [ngClass]="activeTab === 'debo' ? 'border-b-2 border-indigo-600 text-indigo-600' : 'text-gray-500'"
      class="px-4 py-2 font-medium focus:outline-none transition">
      Mis Deudas (Debo)
    </button>
    <button 
      (click)="switchTab('meDeben')" 
      [ngClass]="activeTab === 'meDeben' ? 'border-b-2 border-indigo-600 text-indigo-600' : 'text-gray-500'"
      class="px-4 py-2 font-medium focus:outline-none transition">
      Me Deben
    </button>
  </div>

  <!-- Filtros -->
  <div class="bg-white shadow rounded-2xl p-6">
    <form [formGroup]="filterForm" (ngSubmit)="applyFilters()" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
      
      <!-- Estado -->
      <div>
        <label class="block text-sm font-medium text-gray-700">Estado</label>
        <select formControlName="estado" 
          class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 h-11 px-3">
          <option value="">Todos</option>
          <option value="PENDIENTE">Pendiente</option>
          <option value="PAGADA">Pagada</option>
        </select>
      </div>

      <!-- Acreedor -->
      <div>
        <label class="block text-sm font-medium text-gray-700">Acreedor</label>
        <input type="text" formControlName="acreedor" placeholder="Nombre acreedor"
          class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 h-11 px-3" />
      </div>

      <!-- Fecha inicio -->
      <div>
        <label class="block text-sm font-medium text-gray-700">Fecha inicio</label>
        <input type="date" formControlName="fechaInicio"
          class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 h-11 px-3" />
      </div>

      <!-- Fecha fin -->
      <div>
        <label class="block text-sm font-medium text-gray-700">Fecha fin</label>
        <input type="date" formControlName="fechaFin"
          class="mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 h-11 px-3" />
      </div>

      <!-- Botones -->
      <div class="col-span-full flex justify-end space-x-3 mt-2">
        <button type="submit" 
          class="px-4 py-2 bg-indigo-600 text-white rounded-lg shadow hover:bg-indigo-700 transition">
          Aplicar
        </button>
        <button type="button" (click)="clearFilters()" 
          class="px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition">
          Limpiar
        </button>
      </div>
    </form>
  </div>

  <!-- Exportar -->
  <div class="flex justify-end">
    <button (click)="exportToExcel()"
      class="px-4 py-2 bg-green-600 text-white rounded-lg shadow hover:bg-green-700 transition">
      Exportar a Excel
    </button>
  </div>

  <!-- Tabla -->
  <div class="overflow-x-auto bg-white shadow rounded-2xl">
    <table class="min-w-full text-sm text-left">
      <thead class="bg-gray-100 text-gray-600 uppercase text-xs">
        <tr>
          <th class="px-6 py-3">ID</th>
          <th class="px-6 py-3">Deudor</th>
          <th class="px-6 py-3">Acreedor</th>
          <th class="px-6 py-3">Monto</th>
          <th class="px-6 py-3">Fecha</th>
          <th class="px-6 py-3">Estado</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let debt of filteredDebts" 
            (click)="openModal(debt)"
            class="cursor-pointer hover:bg-gray-50 transition"
            [ngClass]="{
              'text-green-600': debt.estado === 'PAGADA',
              'text-red-600': debt.estado === 'PENDIENTE'
            }">
          <td class="px-6 py-4">{{ debt.deuda_id }}</td>
          <td class="px-6 py-4">{{ debt.deudor }}</td>
          <td class="px-6 py-4">{{ debt.acreedor }}</td>
          <td class="px-6 py-4 font-medium">{{ debt.monto | currency }}</td>
          <td class="px-6 py-4">{{ debt.fecha_creacion | date }}</td>
          <td class="px-6 py-4">{{ debt.estado }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Modal -->
  <div *ngIf="showModal" class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50">
    <div class="bg-white rounded-2xl shadow-lg max-w-lg w-full p-6 relative">
      <button class="absolute top-3 right-3 text-gray-500 hover:text-gray-700" (click)="closeModal()">
        âœ•
      </button>

      <h3 class="text-xl font-bold mb-4">Detalle de Deuda</h3>
      <p><span class="font-semibold">ID:</span> {{ selectedDebt?.deuda_id }}</p>
      <p><span class="font-semibold">Deudor:</span> {{ selectedDebt?.deudor }}</p>
      <p><span class="font-semibold">Acreedor:</span> {{ selectedDebt?.acreedor }}</p>
      <p><span class="font-semibold">Monto:</span> {{ selectedDebt?.monto | currency }}</p>
      <p><span class="font-semibold">Saldo:</span> {{ selectedDebt?.saldo | currency }}</p>
      <p><span class="font-semibold">Estado:</span> {{ selectedDebt?.estado }}</p>
      <p><span class="font-semibold">Fecha:</span> {{ selectedDebt?.fecha_creacion | date }}</p>
    </div>
  </div>

</div>
