<!-- Balance -->
<div class="balance">
  <p><strong>Total que debo:</strong> {{ totalDebo | currency }}</p>
  <p><strong>Total que me deben:</strong> {{ totalMeDeben | currency }}</p>
</div>

<!-- Tabs -->
<div class="tabs">
  <button [class.active]="activeTab === 'debo'" (click)="switchTab('debo')">
    Mis Deudas (Debo)
  </button>
  <button [class.active]="activeTab === 'meDeben'" (click)="switchTab('meDeben')">
    Me Deben
  </button>
</div>

<!-- Filtros -->
<div class="filters">
  <form [formGroup]="filterForm" (ngSubmit)="applyFilters()">
    <label>Estado:</label>
    <select formControlName="estado">
      <option value="">Todos</option>
      <option value="PENDIENTE">Pendiente</option>
      <option value="PAGADA">Pagada</option>
    </select>

    <label>Acreedor:</label>
    <input type="text" formControlName="acreedor" placeholder="Nombre acreedor" />

    <label>Fecha inicio:</label>
    <input type="date" formControlName="fechaInicio" />

    <label>Fecha fin:</label>
    <input type="date" formControlName="fechaFin" />

    <button type="submit">Aplicar</button>
    <button type="button" (click)="clearFilters()">Limpiar</button>
  </form>
</div>

<div class="export-section">
  <button (click)="exportToExcel()">Exportar a Excel</button>
</div>

<hr />

<!-- Tabla -->
<table>
  <thead>
    <tr>
      <th>ID</th>
      <th>Deudor</th>
      <th>Acreedor</th>
      <th>Monto</th>
      <th>Fecha</th>
      <th>Estado</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let debt of filteredDebts" 
     (click)="openModal(debt)"
    [ngClass]="{ 
          'paid': debt.estado === 'PAGADA', 
          'pending': debt.estado === 'PENDIENTE' 
        }">
      <td>{{ debt.deuda_id }}</td>
      <td>{{ debt.deudor }}</td>
      <td>{{ debt.acreedor }}</td>
      <td>{{ debt.monto | currency }}</td>
      <td>{{ debt.fecha_creacion | date }}</td>
      <td>{{ debt.estado }}</td>
    </tr>
  </tbody>
</table>

<!-- Modal -->
<div class="modal" *ngIf="showModal">
  <div class="modal-content">
    <span class="close" (click)="closeModal()">&times;</span>

    <h3>Detalle de Deuda</h3>
    <p><strong>ID:</strong> {{ selectedDebt?.deuda_id }}</p>
    <p><strong>Deudor:</strong> {{ selectedDebt?.deudor }}</p>
    <p><strong>Acreedor:</strong> {{ selectedDebt?.acreedor }}</p>
    <p><strong>Monto:</strong> {{ selectedDebt?.monto | currency }}</p>
    <p><strong>Saldo:</strong> {{ selectedDebt?.saldo | currency }}</p>
    <p><strong>Estado:</strong> {{ selectedDebt?.estado }}</p>
    <p><strong>Fecha:</strong> {{ selectedDebt?.fecha_creacion | date }}</p>
  </div>
</div>